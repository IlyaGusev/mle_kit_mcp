FROM pytorch/pytorch:2.4.1-cuda12.1-cudnn9-devel

ENV DEBIAN_FRONTEND=noninteractive
RUN apt-get update
RUN apt-get install python3-dev \
    python3-distutils \
    vim \
    screen \
    wget \
    g++ \
    git \
    git-lfs \
    texlive-latex-base \
    texlive-fonts-recommended \
    texlive-latex-extra \
    texlive-science \
    tesseract-ocr \
    ripgrep \
    ninja-build \
    apt-utils \
    -y
RUN wget https://bootstrap.pypa.io/get-pip.py
RUN python3 get-pip.py
RUN pip3 install transformers==4.57.1 \
    peft==0.17.1 \
    accelerate==1.10.1 \
    bitsandbytes==0.48.1 \
    trl==0.24.0 \
    fire>=0.6.0 \
    evaluate==0.4.3 \
    datasets==3.3.2 \
    scikit-learn==1.6.0 \
    torchvision==0.19.1 \
    torchaudio==2.4.1 \
    matplotlib==3.10.1 \
    xgboost==3.0.2 \
    lightgbm==4.6.0
